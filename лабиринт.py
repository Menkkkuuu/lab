import tkinter as tk
# 0 - стены 1 - путь S - вход E - выход
maze = [
    ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],
    ['0','S','1','1','1','E','1','0','1','1','1','0','1','1','1','1','1','1','1','0'],
    ['0','1','0','0','0','0','1','0','1','0','1','0','1','0','0','0','0','0','1','0'],
    ['0','1','1','1','1','0','1','1','1','0','1','1','1','1','1','1','1','0','1','0'],
    ['0','0','0','0','1','0','0','0','1','0','0','0','0','0','0','0','1','0','1','0'],
    ['0','E','1','0','1','1','1','0','1','1','1','1','1','1','1','0','1','1','1','0'],
    ['0','1','0','0','0','0','1','0','0','0','0','0','0','0','1','0','0','0','1','0'],
    ['0','1','1','1','1','0','1','1','1','1','1','1','1','0','1','1','1','0','1','0'],
    ['0','0','0','0','1','0','0','0','1','0','0','0','1','0','0','0','1','0','1','0'],
    ['0','1','1','0','1','1','1','0','1','1','1','0','1','1','1','0','1','1','1','0'],
    ['0','E','0','0','0','0','1','0','1','0','E','0','1','0','0','0','1','0','0','0'],
    ['0','1','1','1','1','1','1','1','1','0','1','1','1','1','1','1','1','1','1','0'],
    ['0','1','0','0','0','0','0','0','1','0','0','0','0','0','0','0','0','0','1','0'],
    ['0','1','1','1','1','1','1','0','1','1','1','0','1','1','1','1','1','0','1','0'],
    ['0','1','0','0','0','0','1','0','0','0','1','0','1','0','0','0','1','0','1','0'],
    ['0','1','1','1','1','0','1','1','1','0','1','1','1','1','1','0','1','1','1','0'],
    ['0','E','0','0','1','0','0','0','1','0','0','0','1','0','0','0','1','0','0','0'],
    ['0','1','1','1','1','1','1','0','1','1','1','0','1','1','1','E','1','1','1','0'],
    ['0','1','0','0','0','0','1','0','1','0','1','0','1','0','0','0','0','0','E','0'],
    ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],
]

n, m = len(maze), len(maze[0])
cell = 20
root = tk.Tk()
w, h = m * cell, n * cell          
root.update_idletasks()
sw, sh = root.winfo_screenwidth(), root.winfo_screenheight()
x = (sw - w) // 2
y = (sh - h) // 2
root.geometry(f"{w}x{h}+{x}+{y}")
c = tk.Canvas(root, width=m * cell, height=n * cell)
c.pack()

start_i = start_j = None
visited = []


def find_start():
    global start_i, start_j
    for i in range(n):
        for j in range(m):
            if maze[i][j] == 'S':
                start_i, start_j = i, j
                return True
    return False


def draw():
    c.delete("all")
    for i in range(n):
        for j in range(m):
            v = maze[i][j]
            if v == '0':
                color = "black"  # стена
            elif v == 'E':
                color = "green" if (i, j) in visited else "red"
            else:
                color = "orange" if (i, j) in visited else "white"  
            if start_i is not None and i == start_i and j == start_j:
                color = "blue"  # вход
            x1, y1 = j * cell, i * cell
            c.create_rectangle(x1, y1, x1 + cell, y1 + cell,fill=color, outline="gray")


def dfs(i, j):
    if maze[i][j] == '0' or (i, j) in visited:
        return 0
    visited.append((i, j))
    exits = 1 if maze[i][j] == 'E' else 0
    draw()
    root.update()
    for di, dj in ((1, 0), (-1, 0), (0, 1), (0, -1)): # вниз, вверх, вправо, влево
        ni, nj = i + di, j + dj
        if 0 <= ni < n and 0 <= nj < m:
            exits += dfs(ni, nj)
    return exits


if find_start():
    draw()
    found_exits = dfs(start_i, start_j)
    print("Найдено выходов:", found_exits)

root.mainloop()
